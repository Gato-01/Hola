<!-- Botón flotante combinado -->
<button class="fab combined-fab" (click)="toggleCombinedPanel()">
  🛒🔔 {{ numeroProductos }}
</button>

<!-- Panel combinado -->
<div class="combined-panel" [class.show]="showCombinedPanel">
  <div class="panel-header">
    <div class="panel-tabs">
      <button [class.active]="activeTab === 'cart'" (click)="activeTab = 'cart'">
        Carrito ({{ numeroProductos }})
      </button>
      <button [class.active]="activeTab === 'reminders'" (click)="activeTab = 'reminders'">
        Recordatorios ({{ reminders.length }})
      </button>
    </div>
    <button class="close-btn" (click)="toggleCombinedPanel()">×</button>
  </div>
  
  <!-- Contenido del carrito -->
  <div class="panel-content" *ngIf="activeTab === 'cart'">
    <div class="cart-items">
      <div class="cart-item" *ngFor="let item of carrito; let i = index">
        <img [src]="item.images[0]" alt="{{item.title}}">
        <div class="item-info">
          <span class="title">{{ truncateText(item.title, 20) }}</span>
          <span class="price">{{ item.price | currency }}</span>
          <div class="item-actions">
            <button (click)="eliminarDelCarrito(i)" class="remove-btn">Eliminar</button>
            <button (click)="moverARecordatorios(i)" class="reminder-btn">Recordar</button>
          </div>
        </div>
      </div>
      <p *ngIf="carrito.length === 0" class="empty">Tu carrito está vacío</p>
    </div>

    <div class="cart-footer" *ngIf="carrito.length > 0">
      <div class="total">
        <span>Total:</span>
        <span>{{ calcularTotal() | currency }}</span>
      </div>
      <button (click)="mostrarAlertaLogin()" class="checkout-btn">Finalizar Compra</button>
    </div>
  </div>
  
  <!-- Contenido de recordatorios -->
  <div class="panel-content" *ngIf="activeTab === 'reminders'">
    <div class="reminder-grid">
      <div class="reminder-card" *ngFor="let p of reminders; let i = index">
        <img [src]="p.images[0]" alt="{{p.title}}">
        <div class="info">
          <span class="name">{{ p.title }}</span>
          <span class="price">{{ p.price | currency }}</span>
          <div class="item-actions">
            <span (click)="eliminarDelRecordatorio(i)" class="icon-recordado">🗑️</span>
            <button (click)="moverACarrito(i)" class="add-to-cart">Añadir</button>
          </div>
        </div>
      </div>
      <p *ngIf="reminders.length === 0" class="empty">No tienes recordatorios</p>
    </div>
  </div>
</div>

<!-- Contenedor general -->
<div class="container">
  <!-- Sidebar (Columna izquierda de navegación) -->
  <div class="sidebar">
    <h3>Categorías</h3>
    <ul>
      
      <li>📱 Electrónica</li>
      <li>🏠 Hogar</li>
      <li>⚽ Deportes</li>
      <li>🛒 Carrito {{numeroProductos}}</li>
    </ul>
  </div>

  <!-- Galería de productos (4 columnas) -->
  <div class="products-grid">
    <app-producto 
    [product]="product"
    *ngFor="let product of visibleProducts" 
    (agregar)="agregarAlCarrito($event)"
    (recordarProducto)="agregarAlRecordatorio($event)"
  >
    </app-producto>
  </div>
  <div class="load-more">
    <button *ngIf="products && products.length > 0 && productsToShow < products.length" 
            (click)="showMore()">
      Ver más ({{ productsToShow }}/{{ products.length }})
    </button>
    <p *ngIf="productsToShow >= products.length && products.length > 0" class="no-more">
      ¡Has visto todos los productos!
    </p>
  </div>
<!-- Enviamos el producto al componente hijo (producto)
significa que cuando ProductoComponent emita un evento,
AppComponent ejecutará agregarAlCarrito() con ese producto. -->